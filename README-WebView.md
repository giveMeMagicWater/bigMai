# 🎫 大麦网抢票工具 - WebView配置界面

## 🌟 功能特点

基于Electron的现代化图形界面，集成大麦网WebView，让配置抢票参数变得简单直观！

### ✨ 主要功能

- **🎨 可视化配置界面** - 直观的表单配置，无需手动编辑代码
- **🌐 集成大麦网WebView** - 直接在界面中浏览大麦网，获取演出信息
- **🔍 智能URL解析** - 自动解析演出页面URL，提取演出ID
- **✅ 配置验证** - 实时验证配置完整性，避免配置错误
- **💾 配置管理** - 支持保存、加载、新建配置文件
- **📱 响应式设计** - 支持不同屏幕尺寸，移动端友好

## 🚀 快速开始

### 1. 安装依赖

```bash
# 安装基础依赖
npm install

# 安装Electron依赖（首次运行会自动安装）
npm run electron
```

### 2. 启动WebView界面

```bash
# 方式1: 使用npm脚本
npm run electron

# 方式2: 直接运行启动脚本
node start-webview.js

# 方式3: 开发模式（自动重载）
npm run electron-dev
```

### 3. 配置抢票参数

#### 第一步：获取演出信息
1. 在大麦网找到目标演出
2. 复制演出页面URL（如：https://www.damai.cn/item/123456789.html）
3. 粘贴到"演出页面URL"输入框
4. 点击"解析"按钮自动获取演出ID

#### 第二步：配置基本信息
- **演出名称**：演出标题
- **演出场馆**：演出地点
- **演出时间**：实际演出时间
- **开票时间**：精确到秒的开票时间

#### 第三步：设置票档信息
- **票档类型**：按优先级排序，如：VIP,A区,B区,C区
- **最高票价**：设置价格上限

#### 第四步：配置观演人
- **观演人姓名**：添加观演人信息
- **最大数量**：设置观演人数量限制

#### 第五步：设置收货地址
- 填写完整的收货人信息和地址

#### 第六步：配置抢票策略
- **提前进入时间**：开票前多久开始准备
- **刷新间隔**：页面刷新频率
- **最大重试次数**：失败重试次数
- **并发数量**：同时执行的抢票任务数

### 4. 验证和启动

1. **验证配置**：点击"验证配置"检查配置完整性
2. **保存配置**：保存当前配置到文件
3. **启动抢票**：配置完成后启动抢票机器人

## 🎯 配置参数详解

### 演出信息配置

| 参数 | 说明 | 获取方式 |
|------|------|----------|
| 演出ID | 唯一标识符 | 从URL自动解析 |
| 演出名称 | 演出标题 | 演出页面标题 |
| 演出场馆 | 演出地点 | 演出详情页面 |
| 演出时间 | 实际演出时间 | 演出详情页面 |
| 开票时间 | 开售时间 | 演出详情页面，精确到秒 |

### 票档配置

| 参数 | 说明 | 示例 |
|------|------|------|
| 票档类型 | 按优先级排序 | VIP,A区,B区,C区 |
| 最高票价 | 价格上限 | 2000 |

### 观演人配置

| 参数 | 说明 | 注意事项 |
|------|------|----------|
| 观演人姓名 | 观演人姓名 | 必须提前在大麦网设置 |
| 最大数量 | 观演人数量限制 | 建议不超过4人 |

### 抢票策略配置

| 参数 | 说明 | 推荐值 |
|------|------|--------|
| 提前进入时间 | 开票前准备时间 | 1000ms |
| 刷新间隔 | 页面刷新频率 | 100ms |
| 最大重试次数 | 失败重试次数 | 10次 |
| 并发数量 | 同时执行任务数 | 3个 |

## 🛠️ 高级功能

### 配置管理

- **新建配置**：清空当前配置，重新开始
- **加载配置**：从文件加载已有配置
- **保存配置**：保存当前配置到文件
- **配置验证**：检查配置完整性和正确性

### WebView控制

- **刷新页面**：重新加载当前页面
- **前进/后退**：页面导航
- **返回首页**：回到大麦网首页

### 快捷键

| 快捷键 | 功能 |
|--------|------|
| Ctrl+N | 新建配置 |
| Ctrl+O | 打开配置 |
| Ctrl+S | 保存配置 |
| Ctrl+Q | 退出程序 |

## 📱 界面布局

```
┌─────────────────────────────────────────────────────────┐
│                    🎫 大麦网抢票工具                      │
├─────────────────────┬───────────────────────────────────┤
│                     │                                   │
│    📋 配置面板       │        🌐 大麦网WebView           │
│                     │                                   │
│  • 演出信息         │                                   │
│  • 票档配置         │                                   │
│  • 观演人配置       │                                   │
│  • 收货地址         │                                   │
│  • 抢票策略         │                                   │
│                     │                                   │
│  [验证配置]         │                                   │
│  [启动抢票]         │                                   │
│                     │                                   │
└─────────────────────┴───────────────────────────────────┘
```

## 🔧 技术架构

### 前端技术栈

- **Electron** - 跨平台桌面应用框架
- **HTML5 + CSS3** - 现代化界面设计
- **原生JavaScript** - 无需额外框架依赖
- **WebView** - 集成大麦网页面

### 后端技术栈

- **Node.js** - JavaScript运行时
- **Puppeteer** - 浏览器自动化
- **文件系统API** - 配置文件管理

### 架构特点

- **模块化设计** - 清晰的代码结构
- **事件驱动** - 响应式用户交互
- **安全隔离** - 主进程与渲染进程分离
- **跨平台支持** - Windows、macOS、Linux

## 🚨 注意事项

### 使用前准备

1. **网络环境**：确保网络稳定，建议使用有线网络
2. **大麦网账号**：提前完成实名认证和观演人设置
3. **演出信息**：提前了解演出详情和开票时间
4. **票档选择**：确定目标票档和价格范围

### 安全提醒

1. **遵守条款**：遵守大麦网使用条款
2. **合理使用**：避免过度频繁的请求
3. **个人信息**：妥善保管配置信息
4. **法律风险**：了解相关法律法规

### 故障排除

| 问题 | 解决方案 |
|------|----------|
| WebView无法加载 | 检查网络连接，尝试刷新页面 |
| 配置验证失败 | 检查必填项，确保格式正确 |
| 程序启动失败 | 检查依赖安装，重新安装Electron |
| 配置保存失败 | 检查文件权限，选择可写目录 |

## 📞 技术支持

### 常见问题

**Q: 为什么WebView显示空白？**
A: 可能是网络问题或大麦网反爬虫机制，尝试刷新页面或检查网络。

**Q: 配置验证一直失败？**
A: 检查必填项是否完整，特别是演出ID、开票时间等关键信息。

**Q: 如何获取演出ID？**
A: 从演出页面URL获取，格式为：https://www.damai.cn/item/123456789.html

**Q: 支持哪些文件格式？**
A: 支持.js和.json格式的配置文件。

### 获取帮助

- 查看内置帮助文档（点击"帮助"按钮）
- 检查控制台错误信息
- 查看应用日志文件
- 提交Issue到项目仓库

## 🔄 更新日志

### v1.0.0 (2024-01-01)
- ✨ 初始版本发布
- 🎨 现代化图形界面
- 🌐 集成大麦网WebView
- 🔧 完整的配置管理功能
- 📱 响应式设计支持

## 📄 许可证

MIT License - 详见 [LICENSE](LICENSE) 文件

---

**�� 让抢票变得简单，让成功触手可及！** 